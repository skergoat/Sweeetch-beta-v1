{% extends 'base-front.html.twig' %}

{% block title %} {{ parent() }} - offers {% endblock %}

{% block body %}

<div class="background-jobs">
    <div class="container container-jobs">

        <header id="header">

            <div id="topbar">
            <div class="container">
                <div class="social-links">
                <a href="https://twitter.com/SweeetchA" target="_blank" class="twitter"><i class="fa fa-twitter"></i></a>
                <a href="https://www.facebook.com/sweeetch.ton.alternance/" target="_blank" class="facebook"><i class="fa fa-facebook"></i></a>
                <a href="https://fr.linkedin.com/company/sweetchmontpellier?trk=public_profile_topcard_current_company" target="_blank" class="linkedin"><i class="fa fa-linkedin"></i></a>
                <a href="https://www.instagram.com/sweeetch_alternance/" target="_blank" class="instagram"><i class="fa fa-instagram"></i></a>
                </div>
            </div>
            </div>
        
            <div class="container nav-desktop">
                <nav class="nav-jobs main-nav d-none d-lg-block">
                    <ul>
                        <li><a href="/offers/">Emplois</a></li> 
                    </ul>
                </nav>
            </div>
        </header>

        <h1 class="titles-front">{{ offers.title }}</h1>
        <h4 class="card-subtitle mb-2 text-muted">{{ offers.location }}</h4>

        {% for message in app.flashes('success') %}
        <div class="alert alert-success">
            {{ message }}
        </div>
        {% endfor %}

        <div class="Password card col-lg-12">
            <div class="card-body">
                <table class="table offers-show col-lg-4 col-md-4 col-sm-12 col-xs-12">
                    <tbody>
                        <tr>
                            <th>Lieu</th>
                            <td>{{ offers.location }}</td>
                        </tr>
                        <tr>
                            <th>Domaine</th>
                            <td>{{ offers.domain }}</td>
                        </tr>
                        <tr>
                            <th>Du</th>
                            <td>{{ offers.dateStart ? offers.dateStart|date('d-m-Y') : '' }}</td>
                        </tr>
                        <tr>
                            <th>Au</th>
                            <td>{{ offers.dateEnd ? offers.dateEnd|date('d-m-Y') : '' }}</td>
                        </tr>
                    </tbody>
                </table>

                <div class="description">
                    <h5>Description</h5>
                    <p>{{ offers.description }}</p>
                </div>
        
                {% if app.user.student.id is defined %}
                    {% if is_granted('ROLE_SUPER_STUDENT') %}
                        <form method="post" action="{{ path('apply', { id:offers.id, student_id: app.user.student.id }) }}">
                            <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ offers.id) }}">
                            <button class="btn btn-success">Postuler</button>
                        </form> 
                    {% elseif is_granted('ROLE_STUDENT') %}
                    <br><br>
                    <p style="color:red;">Votre compte doit etre valide pour pouvoir postuler</p>
                    {% endif %}
                {% endif %}
            </div>
        </div>

    </div>
</div>

<footer id="footer" class="section-bg">
    <div class="container">
        <div class="copyright">
        &copy; Copyright <strong>SWEEETCH</strong>. All Rights Reserved
        </div>
        <div class="credits">
        L'Ã©quipe de SWEEETCH
        </div>
    </div>
</footer>

{% endblock %}

