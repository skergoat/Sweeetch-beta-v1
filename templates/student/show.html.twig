{% extends 'base-student.html.twig' %}

{% block title %} {{ parent() }} - students {% endblock %}

{% block body %}

    <br><br>

    <div style="display:flex;">
        <div>
            <h3>Etat du Compte :</h3>
            {% if is_granted('ROLE_SUPER_STUDENT') %}  <p style="color:green;">valide</p> {% else %}  <p style="color:red;">en attente</p> {% endif %}
        </div>
        <div style="margin-left:50px;">
            
        <h3>Mon Emploi</h3>

        {% if applies[0] is defined %}
        
            {% if applies[0].confirmed == false %} 
                {% if applies[0].hired == false %} 
                    {% if applies[0].agree == false %} 
                    Vous avez des postulations 
                    {% else %}
                    Dossier en traitement
                    {% endif %}
                {% else %}
                Vous devez Accepter
                {% endif %}
            {% else %}
            L'Entreprise a confirme votre embauche
            {% endif %}

        {% else %}
        <p style="color:red;">Aucune mission en cours</p>
        {% endif %}

        </div>
    </div>

    <br><br>

    <h3>Mes Infos</h3>

    <table class="table">
        <tbody>
            <tr>
                <th>Email</th>
                <td>{{ student.user.email }}</td>
            </tr>
            <tr>
                <th>Name</th>
                <td>{{ student.name }}</td>
            </tr>
            <tr>
                <th>Lastname</th>
                <td>{{ student.lastname }}</td>
            </tr>
            <tr>
                <th>Adress</th>
                <td>{{ student.adress }}, {{ student.zipCode }}, {{ student.city }}</td>
            </tr>
            <tr>
                <th>Telephone</th>
                <td>{{ student.telNumber }}</td>
            </tr>
            <tr>
                <th>Permis B</th>
                <td>{% if student.drivingLicense == 1 %} oui {% else %} non {% endif %} </td>
            </tr>
            <tr>
                <th>Disabled</th>
                <td>{% if student.disabled == 1 %} oui {% else %} non {% endif %} </td>   
            </tr>
        </tbody>
    </table>

    <br><br>

    <h3>Mon Profile</h3>

    <table class="table">
        <tbody>
            <tr>
                <th>Domaine d'activite</th>
                <td>{{ student.profile.domain }}</td>
            </tr>
            <tr>
                <th>Region recherchee</th>
                <td>{{ student.profile.area }}</td>
            </tr>
        </tbody>
    </table>

    <h3>Langues</h3>

    <table class="table">
        <tbody>
            <tr>
                <td><strong>Name</strong></td>
                <td><strong>Level</strong></td>
            </tr>
            {% for languages in student.profile.languages %}

            <tr>
                <td>{{ languages.languageName }}</td>
                <td>{{ languages.level }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <h3>Formation</h3>

    <table class="table">
        <tbody>
            <tr>
                <td><strong>Title</strong></td>
                <td><strong>School</strong></td>
                <td><strong>From</strong></td>
                <td><strong>To</strong></td>
            </tr>
            {% for education in student.profile.education %}
            <tr>
                <td>{{ education.title }}</td>
                <td>{{ education.school }}</td>
                <td>{{ education.dateStart|date("m/d/Y") }}</td>
                {% if education.current == true %}
                  <td>  en cours </td>
                {% else %}
                    <td>{{ education.dateEnd|date("m/d/Y") }}</td>
                {% endif %}
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <br><br>


    <h3>Mes Documents</h3>

    <table class="table">
        <tbody>
            <tr>
                <td><strong>Mon CV</strong></td>
                {% if is_granted("ROLE_STUDENT") %}
                <td><strong>Ma Carte d'identite</strong></td>
                <td><strong>Ma Carte d'etudiant</strong></td>
                <td><strong>Justificatif de domicile</strong></td>
                {% endif %}
            </tr>
            <tr>
                <td>
                    <span>
                        <a href="{{ path('student_download_resume', { id: student.resume.id }) }}"><span class="fa fa-download">{{ student.resume.originalFilename }}</span></a>
                    </span>
                    {# <!-- temporary -->
                    <a href="{{ uploaded_asset(student.resume.fileName) }}" target="_blank">
                        <img class="show-article-img" src="{{ student.resume.fileName|imagine_filter('squared_thumbnail_small') }}" alt=""/>
                    </a> #}
                </td>
                <td>   
                    <span>
                        <a href="{{ path('student_download_idcard', { id: student.idCard.id }) }}"><span class="fa fa-download">{{ student.idCard.originalFilename }}</span></a>
                    </span>
                    {# <!-- temporary -->
                    <a href="{{ uploaded_asset(student.resume.fileName) }}" target="_blank">
                        <img class="show-article-img" src="{{ student.resume.fileName|imagine_filter('squared_thumbnail_small') }}" alt=""/>
                    </a> #}
                </td>
                <td>   
                    <span>
                        <a href="{{ path('student_download_studentcard', { id: student.studentCard.id }) }}"><span class="fa fa-download">{{ student.studentCard.originalFilename }}</span></a>
                    </span>
                    {# <!-- temporary -->
                    <a href="{{ uploaded_asset(student.resume.fileName) }}" target="_blank">
                        <img class="show-article-img" src="{{ student.resume.fileName|imagine_filter('squared_thumbnail_small') }}" alt=""/>
                    </a> #}
                </td>
                <td>   
                    <span>
                        <a href="{{ path('student_download_proofhabitation', { id: student.proofHabitation.id }) }}"><span class="fa fa-download">{{ student.proofHabitation.originalFilename }}</span></a>
                    </span>
                    {# <!-- temporary -->
                    <a href="{{ uploaded_asset(student.resume.fileName) }}" target="_blank">
                        <img class="show-article-img" src="{{ student.resume.fileName|imagine_filter('squared_thumbnail_small') }}" alt=""/>
                    </a> #}
                </td>
            </tr>
        </tbody>
    </table>

{% endblock %}
